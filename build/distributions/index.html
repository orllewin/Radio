<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#f7e082" />
    <link rel="manifest" href="manifest.json">
    <link href="style.css" rel="stylesheet" />
    <title>Radio</title>
    <script>
        function setMetadata(stationTitle, imageUrl) {
            console.log("Attempting to set media metadata: " + stationTitle + ": " + imageUrl)
            if ("mediaSession" in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: stationTitle,
                    artwork: [{src: imageUrl}]
                });

                try {
                    navigator.mediaSession.setActionHandler('stop', function() {
                        var footer = document.getElementById('footer');
                        footer.style.display = 'none';
                    });
                } catch(error) {
                    console.log('Warning! The "stop" media session action is not supported.');
                }
            }
        }
    </script>
</head>
<body>
<header>
    <button id="back_button">
        <img src="assets/back.svg">
    </button>
    <svg width="125" height="31" viewBox="0 0 125 31" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M59.3558 28.4441C59.3803 28.6894 59.3558 28.9225 59.2823 29.1432C59.2332 29.2904 59.1597 29.4131 59.0616 29.5112C58.9881 29.6093 58.89 29.7075 58.7674 29.8056C58.5468 29.9528 58.2771 30.0877 57.9585 30.2104C57.7623 30.2594 57.5662 30.2962 57.3701 30.3207C57.1985 30.3698 57.0146 30.3698 56.8185 30.3207C56.4263 30.2962 56.083 30.149 55.7889 29.8792C55.3721 29.5357 55.0289 29.1555 54.7592 28.7385C54.6367 28.5422 54.5018 28.3215 54.3547 28.0761C54.2076 27.8308 54.0728 27.5733 53.9502 27.3034L49.8685 19.5393C49.6724 19.5393 49.4762 19.5516 49.2801 19.5761C49.084 19.5761 48.8879 19.5884 48.6917 19.6129C48.1769 19.662 47.6866 19.6742 47.2208 19.6497C46.7796 19.6252 46.3138 19.6252 45.8235 19.6497H45.1248V26.3099C45.1248 26.5062 45.1125 26.6901 45.088 26.8619C45.088 27.0336 45.088 27.2176 45.088 27.4138C45.088 27.5365 45.0758 27.6959 45.0513 27.8922C45.0513 28.0884 45.039 28.2724 45.0145 28.4441C44.9655 28.714 44.8551 28.9961 44.6835 29.2904C44.5119 29.5603 44.279 29.7933 43.9849 29.9896C43.47 30.3085 42.8449 30.3943 42.1094 30.2472C41.7908 30.1736 41.4843 30.0509 41.1901 29.8792C41.0921 29.8056 41.0063 29.7197 40.9327 29.6216C40.8592 29.499 40.7979 29.3763 40.7489 29.2536C40.6998 29.131 40.6508 29.0083 40.6018 28.8857C40.5773 28.7385 40.5405 28.6036 40.4915 28.4809C40.4179 28.2356 40.3811 28.0026 40.3811 27.7818V6.88123C40.3811 6.73404 40.3811 6.58685 40.3811 6.43967C40.4056 6.26795 40.4302 6.12076 40.4547 5.99811C40.4792 5.72826 40.565 5.45842 40.7121 5.18858C40.7856 4.8942 40.9082 4.68569 41.0798 4.56303C41.2269 4.41585 41.4475 4.29319 41.7417 4.19507C42.0604 4.07241 42.5139 4.02335 43.1023 4.04788C44.2055 4.07241 45.2964 4.08468 46.3751 4.08468C47.4537 4.08468 48.5324 4.10921 49.6111 4.15827C50.322 4.20733 51.0697 4.29319 51.8542 4.41585C52.6632 4.51397 53.4109 4.69796 54.0973 4.9678C54.5386 5.13952 54.9431 5.31123 55.3108 5.48295C55.7766 5.7528 56.1443 6.01037 56.414 6.25568C57.272 7.04068 57.9217 7.98513 58.363 9.08903C58.8042 10.1929 59.0249 11.3091 59.0249 12.4375C59.0249 13.7622 58.7062 14.9765 58.0688 16.0804C57.4559 17.1843 56.463 18.0061 55.0902 18.5458C55.0412 18.5949 54.9676 18.6317 54.8696 18.6562C54.796 18.6562 54.7347 18.6684 54.6857 18.693L58.0688 25.5004L58.3997 26.0891C58.4488 26.1872 58.51 26.2976 58.5836 26.4203C58.6571 26.5429 58.7184 26.6656 58.7674 26.7883C58.841 26.9109 58.9023 27.0458 58.9513 27.193C59.0249 27.3402 59.0984 27.4751 59.1719 27.5978C59.2455 27.9412 59.3068 28.2233 59.3558 28.4441ZM50.1627 15.3445C50.6039 15.3445 51.0207 15.2709 51.4129 15.1237C51.8297 14.952 52.1974 14.7312 52.5161 14.4614C52.8593 14.1915 53.1412 13.8849 53.3619 13.5414C53.5825 13.1735 53.7051 12.781 53.7296 12.3639C53.8277 11.1374 53.509 10.2297 52.7735 9.64098C52.0381 9.0277 51.0697 8.69653 49.8685 8.64747C49.1575 8.59841 48.3731 8.57388 47.515 8.57388C46.6815 8.57388 45.8848 8.57388 45.1248 8.57388C45.1493 9.57965 45.1493 10.61 45.1248 11.6648C45.1248 12.6951 45.1248 13.9217 45.1248 15.3445H50.1627Z" fill="black"/>
        <path d="M65.44 14.5717C66.1754 14.2038 66.9476 13.9462 67.7566 13.799C68.5656 13.6273 69.3624 13.5905 70.1469 13.6886C70.9559 13.7622 71.7281 13.9707 72.4635 14.3142C73.199 14.6331 73.8854 15.0992 74.5228 15.7124C75.1602 16.3503 75.6505 17.0494 75.9937 17.8099C76.3369 18.5703 76.5821 19.4166 76.7292 20.3488C76.8272 20.9866 76.9866 21.5754 77.2072 22.1151C77.4278 22.6548 77.6607 23.1944 77.9059 23.7341C78.1755 24.2738 78.4207 24.8135 78.6413 25.3532C78.8865 25.8929 79.0826 26.4571 79.2297 27.0458C79.3523 27.6101 79.3032 28.162 79.0826 28.7017C78.8865 29.2168 78.4697 29.5357 77.8323 29.6584C77.4646 29.732 77.1091 29.7075 76.7659 29.5848C76.4472 29.4376 76.1531 29.2414 75.8834 28.9961C75.6137 28.7262 75.3686 28.4441 75.1479 28.1497C74.9518 27.8308 74.7679 27.5365 74.5963 27.2666C74.0325 28.0026 73.4196 28.579 72.7577 28.9961C72.0958 29.3886 71.2991 29.6461 70.3675 29.7688C69.583 29.8669 68.8353 29.8914 68.1244 29.8424C67.4134 29.7933 66.6535 29.6584 65.8445 29.4376C64.7903 29.1678 63.92 28.7017 63.2336 28.0393C62.5717 27.3525 62.0569 26.5675 61.6891 25.6844C61.3459 24.7767 61.1621 23.8077 61.1376 22.7774C61.113 21.7471 61.2356 20.7291 61.5053 19.7233C61.8485 18.3986 62.3633 17.3192 63.0497 16.4852C63.7362 15.6511 64.5329 15.0133 65.44 14.5717ZM66.3593 18.877C66.0161 19.2204 65.7464 19.6252 65.5503 20.0913C65.3542 20.5573 65.2316 21.048 65.1825 21.5631C65.158 22.0783 65.2071 22.5934 65.3296 23.1086C65.4522 23.6237 65.6483 24.0776 65.918 24.4701C66.1632 24.8135 66.5799 25.1079 67.1683 25.3532C67.7566 25.574 68.3695 25.7089 69.0069 25.7579C69.7424 25.807 70.3797 25.6108 70.9191 25.1692C71.4829 24.7276 71.8997 24.1757 72.1693 23.5134C72.4635 22.8265 72.5984 22.1028 72.5738 21.3423C72.5493 20.5573 72.341 19.8459 71.9487 19.2081C71.6545 18.742 71.2623 18.3986 70.772 18.1778C70.3062 17.957 69.8036 17.8467 69.2643 17.8467C68.725 17.8221 68.1856 17.908 67.6463 18.1042C67.1315 18.2759 66.7025 18.5335 66.3593 18.877Z" fill="black"/>
        <path d="M93.7621 4.34225C94.2279 4.2196 94.6324 4.20733 94.9756 4.30546C95.3433 4.37905 95.6497 4.5385 95.8949 4.78381C96.1645 5.02913 96.3607 5.33576 96.4832 5.70373C96.6303 6.0717 96.7039 6.47646 96.7039 6.91803C96.7284 8.14458 96.7284 9.1013 96.7039 9.78817C96.7039 10.475 96.7039 11.0761 96.7039 11.5912V22.8878C96.7039 24.2125 96.7039 25.3164 96.7039 26.1995C96.7039 27.0826 96.6548 27.8063 96.5568 28.3705C96.4832 28.9102 96.3362 29.315 96.1155 29.5848C95.9194 29.8547 95.613 30.0386 95.1962 30.1368C94.7794 30.2594 94.2279 30.3207 93.5414 30.3207C92.8795 30.3207 92.046 30.3207 91.0409 30.3207C88.3933 30.3207 86.2972 29.6952 84.7528 28.4441C83.2328 27.193 82.4238 25.206 82.3258 22.483C82.2767 21.3055 82.4238 20.2262 82.767 19.2449C83.1103 18.2637 83.6128 17.4296 84.2747 16.7428C84.9611 16.0313 85.7947 15.4917 86.7753 15.1237C87.7804 14.7312 88.9203 14.5472 90.1951 14.5717H92.2176V7.98513C92.2176 7.59263 92.2176 7.2124 92.2176 6.84443C92.2176 6.45193 92.2544 6.09623 92.3279 5.77733C92.4015 5.43389 92.5486 5.13952 92.7692 4.89421C92.9898 4.64889 93.3208 4.46491 93.7621 4.34225ZM87.3636 24.7644C87.8784 25.4758 88.81 25.8683 90.1583 25.9419C90.428 25.9665 90.6854 25.9787 90.9306 25.9787C91.1757 25.9542 91.3964 25.9174 91.5925 25.8683C91.8131 25.8438 92.0215 25.807 92.2176 25.7579V18.9506C91.3596 18.8034 90.5751 18.7175 89.8642 18.693C89.1777 18.6439 88.4913 18.8892 87.8049 19.4289C87.4372 19.7233 87.1553 20.1035 86.9591 20.5696C86.763 21.0112 86.6527 21.4895 86.6282 22.0047C86.6037 22.4953 86.6527 22.9859 86.7753 23.4766C86.8978 23.9672 87.094 24.3965 87.3636 24.7644Z" fill="black"/>
        <path d="M104.303 16.1172C104.303 16.8041 104.303 17.5768 104.303 18.4354C104.328 19.294 104.34 20.1894 104.34 21.1216C104.34 22.0292 104.34 22.9369 104.34 23.8445C104.34 24.7276 104.328 25.5494 104.303 26.3099C104.279 26.6779 104.242 27.0826 104.193 27.5242C104.144 27.9412 104.046 28.3337 103.899 28.7017C103.752 29.0697 103.519 29.3763 103.2 29.6216C102.906 29.8424 102.501 29.9405 101.986 29.916C101.227 29.8669 100.675 29.5357 100.332 28.9225C100.013 28.3092 99.8292 27.4506 99.7801 26.3467C99.7801 25.7825 99.7679 25.1324 99.7434 24.3965C99.7434 23.6605 99.7311 22.9123 99.7066 22.1519C99.7066 21.3914 99.7066 20.6555 99.7066 19.9441C99.7066 19.2081 99.7066 18.5458 99.7066 17.957C99.7066 17.6136 99.6943 17.1966 99.6698 16.706C99.6698 16.2153 99.6821 15.7124 99.7066 15.1973C99.7311 14.6821 99.7924 14.1915 99.8905 13.7254C99.9885 13.2348 100.148 12.83 100.369 12.5111C100.54 12.3149 100.785 12.1677 101.104 12.0696C101.423 11.9469 101.754 11.8856 102.097 11.8856C102.465 11.8856 102.808 11.9469 103.126 12.0696C103.47 12.1922 103.715 12.3639 103.862 12.5847C103.96 12.7319 104.034 12.9404 104.083 13.2103C104.132 13.4801 104.168 13.7867 104.193 14.1302C104.242 14.4491 104.266 14.7925 104.266 15.1605C104.291 15.5039 104.303 15.8228 104.303 16.1172ZM102.906 8.68427C102.146 8.88052 101.508 8.80692 100.994 8.46349C100.503 8.09552 100.197 7.55583 100.074 6.84443C99.9763 6.32928 100.013 5.87545 100.185 5.48295C100.356 5.09045 100.614 4.79608 100.957 4.59983C101.3 4.37905 101.692 4.28093 102.134 4.30546C102.575 4.32999 103.016 4.50171 103.457 4.82061C103.874 5.11499 104.168 5.45842 104.34 5.85092C104.536 6.24342 104.597 6.62365 104.524 6.99162C104.475 7.35959 104.315 7.70302 104.046 8.02193C103.776 8.3163 103.396 8.53708 102.906 8.68427Z" fill="black"/>
        <path d="M112.278 13.431C113.087 13.0385 113.933 12.7564 114.815 12.5847C115.698 12.413 116.568 12.3762 117.426 12.4743C118.309 12.5725 119.154 12.8055 119.963 13.1735C120.797 13.5414 121.557 14.0566 122.243 14.7189C122.807 15.2831 123.297 15.97 123.714 16.7795C124.131 17.5645 124.437 18.3373 124.634 19.0977C125.05 20.447 125.112 21.8084 124.817 23.1822C124.523 24.5559 124.021 25.8315 123.31 27.009C122.967 27.5487 122.538 28.0393 122.023 28.4809C121.532 28.8979 121.005 29.2414 120.441 29.5112C119.706 29.8547 118.909 30.0877 118.051 30.2104C117.193 30.3575 116.36 30.3943 115.551 30.3207C114.08 30.2472 112.781 29.8792 111.653 29.2168C110.55 28.5545 109.655 27.7082 108.968 26.6779C108.307 25.6476 107.865 24.4823 107.645 23.1822C107.448 21.8575 107.534 20.5083 107.902 19.1345C108.294 17.6627 108.858 16.4729 109.594 15.5653C110.354 14.6331 111.248 13.9217 112.278 13.431ZM113.381 18.3618C113.013 18.7052 112.731 19.1345 112.535 19.6497C112.339 20.1648 112.217 20.7045 112.168 21.2687C112.119 21.8084 112.155 22.3604 112.278 22.9246C112.425 23.4643 112.646 23.9549 112.94 24.3965C113.185 24.7644 113.626 25.0711 114.264 25.3164C114.901 25.5617 115.563 25.7089 116.249 25.7579C117.034 25.807 117.72 25.5985 118.309 25.1324C118.897 24.6418 119.338 24.0408 119.632 23.3294C119.951 22.618 120.098 21.8452 120.074 21.0112C120.049 20.1771 119.829 19.4166 119.412 18.7298C119.118 18.2392 118.701 17.8835 118.162 17.6627C117.647 17.4174 117.095 17.2947 116.507 17.2947C115.943 17.2702 115.379 17.356 114.815 17.5523C114.251 17.724 113.773 17.9938 113.381 18.3618Z" fill="black"/>
        <rect y="7.25513" width="34.6844" height="23.1229" rx="8" fill="black"/>
        <circle cx="25.6027" cy="21.4717" r="3.36057" fill="white"/>
        <path d="M7.71225 24.4126H16.8213M7.71225 21.0843H16.8213M7.71225 17.6685H16.8213" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <path d="M7.71225 24.4126H16.8213M7.71225 21.0843H16.8213M7.71225 17.6685H16.8213" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <path d="M7.71225 24.4126H16.8213M7.71225 21.0843H16.8213M7.71225 17.6685H16.8213" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <path d="M7.71225 24.4126H16.8213M7.71225 21.0843H16.8213M7.71225 17.6685H16.8213" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <path d="M7.71225 24.4126H16.8213M7.71225 21.0843H16.8213M7.71225 17.6685H16.8213" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <line x1="9.33061" y1="7.88872" x2="26.0337" y2="1.42809" stroke="black" stroke-width="2" stroke-linecap="round"/>
    </svg>


    <button id="settings_button">
        <img src="assets/overflow.svg" style="height: 24px;">
    </button>
</header>

<section id="settings" class="settings">
    <h2>Settings</h2>
    <p>You can use your own remote JSON feed instead of using the Orllewin default. You'll need to copy the format of the main feed at <a href="https://orllewin.uk/orllewin_stations.json">orllewin.uk/orllewin_stations.json</a> precisely.</p>
    <p>Test your JSON radio file by adding as a query string: <a href="https://orllewin.github.io/radio/?https://orllewin.uk/stations.json">example</a>, when you're happy set it below and the url will be saved to local storage, reload the radio and it should use the custom url override.</p>
    <p>If you have issues check the url and make sure your server is setting the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin">CORS header to *</a></p>
    <input type="text" id="url_input" name="url">
    <button id="save_url_button" class="control_button">Save</button>
</section>

<section id="grid_holder" class="grid_holder"></section>

<div id="controls">
    <img id="now_playing_icon"><button id="website_button" class="control_button website_button left" onclick="stop()">Website</button><button id="stop_button" class="control_button right" onclick="stop()">■ Stop</button>
</div>

<script src="Radio.js"></script>
</body>
</html>
